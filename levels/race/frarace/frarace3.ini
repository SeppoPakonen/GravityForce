-- INI-Datei
-- Frarace3
-- von Frapela
-- 26.08.2003

if (VERSION >= 0.9) then
  dofile("./levels/compat.lua")
end

globals.race_laps     = 1
globals.extra_amount  = 0
globals.level_gravity = 0.02

player[1]:load_image(LEVEL_DIR .. "./frapela/boot_1.bmp")
player[1]:set_wall_shield( player[1]:get_max_wall_shield() )
player[1]:set_ship_value( PV_WALLSHIELD,     0 )
player[1]:set_ship_value( PV_TURN_SPEED,    25 )
player[1]:set_ship_value( PV_MAX_SPEED,     70 )
player[1]:set_ship_value( PV_ACCELERATION,  15 )
player[1]:set_ship_value( PV_FUEL_CONS,    100 )
player[1]:set_fuel_dec(0)
player[1]:set_extra_power(0)
player[1]:set_extra_recharge(0)
local n
for n = 0, player[1]:get_avail_weapon_slots() do
  player[1]:deactivate_weapon_slot(n)
  local waffenschacht   = player[1]:get_weapon_slot(n)
  waffenschacht.type    = 0
  waffenschacht.active  = 0
  waffenschacht.bullets = 0
  waffenschacht.reload  = 0
  player[1]:set_weapon_slot(n, waffenschacht)
end
if globals.players == 2 then
  player[2]:load_image(LEVEL_DIR .. "./frapela/boot_2.bmp")
  player[2]:set_wall_shield( player[2]:get_max_wall_shield() )
  player[2]:set_ship_value( PV_WALLSHIELD,     0 )
  player[2]:set_ship_value( PV_TURN_SPEED,    25 )
  player[2]:set_ship_value( PV_MAX_SPEED,     70 )
  player[2]:set_ship_value( PV_ACCELERATION,  15 )
  player[2]:set_ship_value( PV_FUEL_CONS,    100 )
  player[2]:set_fuel_dec(0)
  player[2]:set_extra_power(0)
  player[2]:set_extra_recharge(0)
  local n
  for n = 0, player[2]:get_avail_weapon_slots() do
    player[2]:deactivate_weapon_slot(n)
    local waffenschacht   = player[2]:get_weapon_slot(n)
    waffenschacht.type    = 0
    waffenschacht.active  = 0
    waffenschacht.bullets = 0
    waffenschacht.reload  = 0
    player[2]:set_weapon_slot(n, waffenschacht)
  end
end
function hook_player_respawn_0(pl)
  pl:set_wall_shield( pl:get_max_wall_shield() )
  pl:set_ship_value( PV_WALLSHIELD,     0 )
  pl:set_ship_value( PV_TURN_SPEED,    25 )
  pl:set_ship_value( PV_MAX_SPEED,     70 )
  pl:set_ship_value( PV_ACCELERATION,  15 )
  pl:set_ship_value( PV_FUEL_CONS,    100 )
  pl:set_fuel_dec(0)
  pl:set_extra_power(0)
  pl:set_extra_recharge(0)
end

mybase = bases:add(  0, PLAYER_BASE, 1897,  829 )

myob = objects:add( 202, OBJ_RACEPOLEU, 1976,  821 )
myob = objects:add( 203, OBJ_RACEPOLED, 1976,  662 )
myob = objects:add(  0, OBJ_RACEPOLEL, 2065,  840 )
myob = objects:add(  1, OBJ_RACEPOLER, 2009,  840 )
myob = objects:add(  2, OBJ_RACEPOLER, 2155,  940 )
myob = objects:add(  3, OBJ_RACEPOLEL, 2215,  940 )
myob = objects:add(  4, OBJ_RACEPOLEL, 2208, 1040 )
myob = objects:add(  5, OBJ_RACEPOLER, 2155, 1040 )
myob = objects:add(  6, OBJ_RACEPOLER, 1995, 1040 )
myob = objects:add(  7, OBJ_RACEPOLEL, 2050, 1040 )
myob = objects:add(  8, OBJ_RACEPOLEL, 2146, 1040 )
myob = objects:add(  9, OBJ_RACEPOLER, 2059, 1040 )
myob = objects:add( 10, OBJ_RACEPOLER, 1995, 1140 )
myob = objects:add( 11, OBJ_RACEPOLEL, 2055, 1140 )
myob = objects:add( 12, OBJ_RACEPOLEL, 2055, 1240 )
myob = objects:add( 13, OBJ_RACEPOLER, 1995, 1240 )
myob = objects:add( 14, OBJ_RACEPOLER, 2210, 1240 )
myob = objects:add( 15, OBJ_RACEPOLEL, 2263, 1240 )
myob = objects:add( 16, OBJ_RACEPOLEL, 2200, 1240 )
myob = objects:add( 17, OBJ_RACEPOLER, 2064, 1240 )
myob = objects:add( 18, OBJ_RACEPOLER, 2205, 1340 )
myob = objects:add( 19, OBJ_RACEPOLEL, 2263, 1340 )
myob = objects:add( 20, OBJ_RACEPOLEL, 2264, 1440 )
myob = objects:add( 21, OBJ_RACEPOLER, 2205, 1440 )
myob = objects:add( 22, OBJ_RACEPOLER, 2205, 1540 )
myob = objects:add( 23, OBJ_RACEPOLEL, 2262, 1540 )
myob = objects:add( 24, OBJ_RACEPOLEL, 2262, 1640 )
myob = objects:add( 25, OBJ_RACEPOLER, 2205, 1640 )
myob = objects:add( 26, OBJ_RACEPOLER, 2205, 1740 )
myob = objects:add( 27, OBJ_RACEPOLEL, 2259, 1740 )
myob = objects:add( 28, OBJ_RACEPOLEL, 2196, 1740 )
myob = objects:add( 29, OBJ_RACEPOLER, 2145, 1740 )
myob = objects:add( 30, OBJ_RACEPOLEL, 2136, 1640 )
myob = objects:add( 31, OBJ_RACEPOLER, 2085, 1640 )
myob = objects:add( 32, OBJ_RACEPOLER, 2005, 1540 )
myob = objects:add( 33, OBJ_RACEPOLEL, 2065, 1540 )
myob = objects:add( 34, OBJ_RACEPOLEL, 2065, 1440 )
myob = objects:add( 35, OBJ_RACEPOLER, 1989, 1440 )
myob = objects:add( 36, OBJ_RACEPOLER, 1988, 1340 )
myob = objects:add( 37, OBJ_RACEPOLEL, 2065, 1340 )
myob = objects:add( 38, OBJ_RACEPOLEL, 2196, 1340 )
myob = objects:add( 39, OBJ_RACEPOLER, 2075, 1340 )
myob = objects:add( 40, OBJ_RACEPOLER, 2075, 1440 )
myob = objects:add( 41, OBJ_RACEPOLEL, 2196, 1440 )
myob = objects:add( 42, OBJ_RACEPOLEL, 2195, 1540 )
myob = objects:add( 43, OBJ_RACEPOLER, 2074, 1540 )
myob = objects:add( 44, OBJ_RACEPOLER, 2146, 1640 )
myob = objects:add( 45, OBJ_RACEPOLEL, 2196, 1640 )
myob = objects:add( 46, OBJ_RACEPOLEL, 2137, 1740 )
myob = objects:add( 47, OBJ_RACEPOLER, 2085, 1740 )
myob = objects:add( 48, OBJ_RACEPOLER, 2020, 1740 )
myob = objects:add( 49, OBJ_RACEPOLEL, 2076, 1740 )
myob = objects:add( 50, OBJ_RACEPOLEL, 2076, 1640 )
myob = objects:add( 51, OBJ_RACEPOLER, 2035, 1640 )
myob = objects:add( 52, OBJ_RACEPOLER, 1950, 1640 )
myob = objects:add( 53, OBJ_RACEPOLEL, 2027, 1640 )
myob = objects:add( 54, OBJ_RACEPOLEL, 2013, 1740 )
myob = objects:add( 55, OBJ_RACEPOLER, 1946, 1740 )
myob = objects:add( 56, OBJ_RACEPOLEL, 2010, 1840 )
myob = objects:add( 57, OBJ_RACEPOLER, 1943, 1840 )
myob = objects:add( 58, OBJ_RACEPOLER, 2250, 1841 )
myob = objects:add( 59, OBJ_RACEPOLEL, 2310, 1840 )
myob = objects:add( 60, OBJ_RACEPOLEL, 2242, 1841 )
myob = objects:add( 61, OBJ_RACEPOLER, 2185, 1840 )
myob = objects:add( 62, OBJ_RACEPOLER, 2110, 1840 )
myob = objects:add( 63, OBJ_RACEPOLEL, 2176, 1840 )
myob = objects:add( 64, OBJ_RACEPOLEL, 2101, 1840 )
myob = objects:add( 65, OBJ_RACEPOLER, 2020, 1840 )
myob = objects:add( 66, OBJ_RACEPOLER, 2020, 1940 )
myob = objects:add( 67, OBJ_RACEPOLEL, 2085, 1940 )
myob = objects:add( 68, OBJ_RACEPOLEL, 2015, 2040 )
myob = objects:add( 69, OBJ_RACEPOLER, 1947, 2040 )
myob = objects:add( 70, OBJ_RACEPOLER, 1944, 2140 )
myob = objects:add( 71, OBJ_RACEPOLEL, 2015, 2140 )
myob = objects:add( 72, OBJ_RACEPOLEL, 2085, 2240 )
myob = objects:add( 73, OBJ_RACEPOLER, 2025, 2240 )
myob = objects:add( 74, OBJ_RACEPOLER, 2095, 2340 )
myob = objects:add( 75, OBJ_RACEPOLEL, 2160, 2340 )
myob = objects:add( 76, OBJ_RACEPOLEL, 2015, 2340 )
myob = objects:add( 77, OBJ_RACEPOLER, 1947, 2340 )
myob = objects:add( 78, OBJ_RACEPOLER, 1948, 2240 )
myob = objects:add( 79, OBJ_RACEPOLEL, 2018, 2240 )
myob = objects:add( 80, OBJ_RACEPOLEL, 2085, 2140 )
myob = objects:add( 81, OBJ_RACEPOLER, 2025, 2140 )
myob = objects:add( 82, OBJ_RACEPOLER, 2025, 2040 )
myob = objects:add( 83, OBJ_RACEPOLEL, 2085, 2040 )
myob = objects:add( 84, OBJ_RACEPOLEL, 2012, 1940 )
myob = objects:add( 85, OBJ_RACEPOLER, 1947, 1940 )
myob = objects:add( 86, OBJ_RACEPOLER, 2250, 1940 )
myob = objects:add( 87, OBJ_RACEPOLEL, 2309, 1940 )
myob = objects:add( 88, OBJ_RACEPOLEL, 2307, 2040 )
myob = objects:add( 89, OBJ_RACEPOLER, 2250, 2040 )
myob = objects:add( 90, OBJ_RACEPOLER, 2313, 2140 )
myob = objects:add( 91, OBJ_RACEPOLEL, 2355, 2140 )
myob = objects:add( 92, OBJ_RACEPOLEL, 2360, 2240 )
myob = objects:add( 93, OBJ_RACEPOLER, 2313, 2240 )
myob = objects:add( 94, OBJ_RACEPOLER, 2350, 2340 )
myob = objects:add( 95, OBJ_RACEPOLEL, 2401, 2340 )
myob = objects:add( 96, OBJ_RACEPOLEL, 2410, 2440 )
myob = objects:add( 97, OBJ_RACEPOLER, 2350, 2440 )
myob = objects:add( 204, OBJ_RACEPOLED, 2130, 2443 )
myob = objects:add( 205, OBJ_RACEPOLEU, 2130, 2537 )
myob = objects:add( 98, OBJ_RACEPOLER, 2024, 2340 )
myob = objects:add( 99, OBJ_RACEPOLEL, 2088, 2340 )
myob = objects:add( 100, OBJ_RACEPOLEL, 2165, 2240 )
myob = objects:add( 101, OBJ_RACEPOLER, 2094, 2240 )
myob = objects:add( 102, OBJ_RACEPOLER, 2093, 2140 )
myob = objects:add( 103, OBJ_RACEPOLEL, 2165, 2140 )
myob = objects:add( 104, OBJ_RACEPOLEL, 2165, 2040 )
myob = objects:add( 105, OBJ_RACEPOLER, 2094, 2040 )
myob = objects:add( 106, OBJ_RACEPOLER, 2095, 1940 )
myob = objects:add( 107, OBJ_RACEPOLEL, 2165, 1940 )
myob = objects:add( 108, OBJ_RACEPOLEL, 2242, 1940 )
myob = objects:add( 109, OBJ_RACEPOLER, 2174, 1940 )
myob = objects:add( 110, OBJ_RACEPOLER, 2173, 2040 )
myob = objects:add( 111, OBJ_RACEPOLEL, 2242, 2040 )
myob = objects:add( 112, OBJ_RACEPOLEL, 2303, 2140 )
myob = objects:add( 113, OBJ_RACEPOLER, 2250, 2140 )
myob = objects:add( 114, OBJ_RACEPOLER, 2175, 2240 )
myob = objects:add( 115, OBJ_RACEPOLEL, 2250, 2240 )
myob = objects:add( 116, OBJ_RACEPOLEL, 2342, 2340 )
myob = objects:add( 117, OBJ_RACEPOLER, 2285, 2340 )
myob = objects:add( 118, OBJ_RACEPOLER, 1948, 2440 )
myob = objects:add( 119, OBJ_RACEPOLEL, 2015, 2440 )
myob = objects:add( 120, OBJ_RACEPOLEL, 2125, 2540 )
myob = objects:add( 121, OBJ_RACEPOLER, 2065, 2540 )
myob = objects:add( 122, OBJ_RACEPOLER, 2215, 2640 )
myob = objects:add( 123, OBJ_RACEPOLEL, 2285, 2640 )
myob = objects:add( 124, OBJ_RACEPOLEL, 2400, 2740 )
myob = objects:add( 125, OBJ_RACEPOLER, 2350, 2740 )
myob = objects:add( 126, OBJ_RACEPOLER, 2415, 2840 )
myob = objects:add( 127, OBJ_RACEPOLEL, 2500, 2840 )
myob = objects:add( 128, OBJ_RACEPOLEL, 2500, 2940 )
myob = objects:add( 129, OBJ_RACEPOLER, 2415, 2940 )
myob = objects:add( 206, OBJ_RACEPOLED, 2140, 2943 )
myob = objects:add( 207, OBJ_RACEPOLEU, 2140, 3037 )
myob = objects:add( 130, OBJ_RACEPOLER, 1947, 2940 )
myob = objects:add( 131, OBJ_RACEPOLEL, 2025, 2940 )
myob = objects:add( 132, OBJ_RACEPOLEL, 2025, 2840 )
myob = objects:add( 133, OBJ_RACEPOLER, 1950, 2840 )
myob = objects:add( 134, OBJ_RACEPOLER, 1950, 2740 )
myob = objects:add( 135, OBJ_RACEPOLEL, 2025, 2740 )
myob = objects:add( 136, OBJ_RACEPOLEL, 2025, 2640 )
myob = objects:add( 137, OBJ_RACEPOLER, 1941, 2640 )
myob = objects:add( 138, OBJ_RACEPOLER, 1940, 2540 )
myob = objects:add( 139, OBJ_RACEPOLEL, 2056, 2540 )
myob = objects:add( 140, OBJ_RACEPOLEL, 2125, 2440 )
myob = objects:add( 141, OBJ_RACEPOLER, 2023, 2440 )
myob = objects:add( 142, OBJ_RACEPOLER, 2167, 2340 )
myob = objects:add( 143, OBJ_RACEPOLEL, 2225, 2340 )
myob = objects:add( 144, OBJ_RACEPOLEL, 2278, 2340 )
myob = objects:add( 145, OBJ_RACEPOLER, 2232, 2340 )
myob = objects:add( 146, OBJ_RACEPOLER, 2285, 2440 )
myob = objects:add( 147, OBJ_RACEPOLEL, 2342, 2440 )
myob = objects:add( 148, OBJ_RACEPOLEL, 2403, 2540 )
myob = objects:add( 149, OBJ_RACEPOLER, 2350, 2540 )
myob = objects:add( 150, OBJ_RACEPOLER, 2294, 2640 )
myob = objects:add( 151, OBJ_RACEPOLEL, 2398, 2639 )
myob = objects:add( 152, OBJ_RACEPOLEL, 2341, 2740 )
myob = objects:add( 153, OBJ_RACEPOLER, 2285, 2740 )
myob = objects:add( 154, OBJ_RACEPOLER, 2210, 2840 )
myob = objects:add( 155, OBJ_RACEPOLEL, 2285, 2840 )
myob = objects:add( 156, OBJ_RACEPOLEL, 2210, 2940 )
myob = objects:add( 157, OBJ_RACEPOLER, 2135, 2940 )
myob = objects:add( 158, OBJ_RACEPOLER, 2040, 3040 )
myob = objects:add( 159, OBJ_RACEPOLEL, 2135, 3040 )
myob = objects:add( 160, OBJ_RACEPOLEL, 2015, 3140 )
myob = objects:add( 161, OBJ_RACEPOLER, 1941, 3140 )
myob = objects:add( 162, OBJ_RACEPOLER, 1941, 3240 )
myob = objects:add( 163, OBJ_RACEPOLEL, 2015, 3240 )
myob = objects:add( 164, OBJ_RACEPOLEL, 2285, 3240 )
myob = objects:add( 165, OBJ_RACEPOLER, 2215, 3240 )
myob = objects:add( 166, OBJ_RACEPOLER, 2440, 3140 )
myob = objects:add( 167, OBJ_RACEPOLEL, 2503, 3140 )
myob = objects:add( 168, OBJ_RACEPOLEL, 2500, 3040 )
myob = objects:add( 169, OBJ_RACEPOLER, 2445, 3040 )
myob = objects:add( 170, OBJ_RACEPOLER, 2340, 2940 )
myob = objects:add( 171, OBJ_RACEPOLEL, 2406, 2940 )
myob = objects:add( 172, OBJ_RACEPOLEL, 2406, 2840 )
myob = objects:add( 173, OBJ_RACEPOLER, 2294, 2840 )
myob = objects:add( 174, OBJ_RACEPOLER, 2215, 2740 )
myob = objects:add( 175, OBJ_RACEPOLEL, 2277, 2740 )
myob = objects:add( 176, OBJ_RACEPOLEL, 2115, 2640 )
myob = objects:add( 177, OBJ_RACEPOLER, 2034, 2640 )
myob = objects:add( 178, OBJ_RACEPOLER, 2135, 2540 )
myob = objects:add( 179, OBJ_RACEPOLEL, 2215, 2540 )
myob = objects:add( 180, OBJ_RACEPOLEL, 2210, 2440 )
myob = objects:add( 181, OBJ_RACEPOLER, 2134, 2440 )
myob = objects:add( 182, OBJ_RACEPOLER, 2219, 2440 )
myob = objects:add( 183, OBJ_RACEPOLEL, 2276, 2440 )
myob = objects:add( 184, OBJ_RACEPOLEL, 2342, 2540 )
myob = objects:add( 185, OBJ_RACEPOLER, 2224, 2540 )
myob = objects:add( 186, OBJ_RACEPOLER, 2124, 2640 )
myob = objects:add( 187, OBJ_RACEPOLEL, 2207, 2640 )
myob = objects:add( 188, OBJ_RACEPOLEL, 2207, 2740 )
myob = objects:add( 189, OBJ_RACEPOLER, 2130, 2740 )
myob = objects:add( 190, OBJ_RACEPOLER, 2034, 2840 )
myob = objects:add( 191, OBJ_RACEPOLEL, 2201, 2840 )
myob = objects:add( 192, OBJ_RACEPOLEL, 2127, 2940 )
myob = objects:add( 193, OBJ_RACEPOLER, 2035, 2940 )
myob = objects:add( 194, OBJ_RACEPOLER, 1946, 3040 )
myob = objects:add( 195, OBJ_RACEPOLEL, 2032, 3040 )
myob = objects:add( 196, OBJ_RACEPOLEL, 2115, 3140 )
myob = objects:add( 197, OBJ_RACEPOLER, 2025, 3140 )
myob = objects:add( 198, OBJ_RACEPOLER, 2120, 3240 )
myob = objects:add( 199, OBJ_RACEPOLEL, 2207, 3240 )
myob = objects:add( 200, OBJ_RACEPOLED, 2294, 3241 )
myob = objects:add( 201, OBJ_RACEPOLEU, 2294, 3319 )

myob = objects:add_special(  0, SPOBJ_TELEPORT1, 1901,  698, 0 )
myob = objects:add_special(  1, SPOBJ_TELEPORT1, 2323, 3277, 0 )

myob = objects:add_special(  2, SPOBJ_BUMPR, 2020,  666 )
myob = objects:add_special(  3, SPOBJ_BUMPL, 1854,  666 )
myob = objects:add_special(  4, SPOBJ_BUMPL, 1854,  742 )

--myob = objects:add( 210, OBJ_TREE, 2354, 3287 )
--myob = objects:add( 211, OBJ_TREE, 2377, 3254 )
--myob = objects:add( 212, OBJ_TREE, 2386, 3251 )
--myob = objects:add( 213, OBJ_TREE, 2398, 3246 )
--myob = objects:add( 214, OBJ_TREE, 2409, 3241 )
--myob = objects:add( 215, OBJ_TREE, 2419, 3237 )
--myob = objects:add( 216, OBJ_TREE, 2431, 3235 )
--myob = objects:add( 217, OBJ_TREE, 2446, 3222 )
--myob = objects:add( 218, OBJ_TREE2, 2363, 3277 )
--myob = objects:add( 219, OBJ_TREE2, 2370, 3271 )
--myob = objects:add( 220, OBJ_TREE2, 2462, 3225 )

myob = objects:add( 221, OBJ_POOL1, 1985, 3318 )

function frarace3()
  if mod( globals.game_time, 5 ) == 0 then
    effects.pixels:add ( random( 1, 5 ), 2035,  780,  30,  30, 0, random(), 1000, PIX_BLUE,  10, 12000, 10000, 200, 5010 )
    effects.pixels:add ( random( 1, 5 ), 2060,  780,  30,  30, 0, random(), 1000, PIX_BLUE,  10, 12000, 10000, 200, 5010 )
    effects.pixels:add ( random( 1, 5 ), 2085,  780,  30,  30, 0, random(), 1000, PIX_BLUE,  10, 12000, 10000, 200, 5010 )
    effects.pixels:add ( random( 1, 5 ), 2110,  780,  30,  30, 0, random(), 1000, PIX_BLUE,  10, 12000, 10000, 200, 5010 )
    effects.pixels:add ( random( 1, 5 ), 2135,  780,  30,  30, 0, random(), 1000, PIX_BLUE,  10, 12000, 10000, 200, 5010 )
    effects.pixels:add ( random( 1, 5 ), 2160,  780,  30,  30, 0, random(), 1000, PIX_BLUE,  10, 12000, 10000, 200, 5010 )
    effects.pixels:add ( random( 1, 5 ), 2185,  780,  30,  30, 0, random(), 1000, PIX_BLUE,  10, 12000, 10000, 200, 5010 )
    effects.pixels:add ( random( 1, 5 ), 2210,  780,  30,  30, 0, random(), 1000, PIX_BLUE,  10, 12000, 10000, 200, 5010 )
    effects.pixels:add ( random( 1, 5 ), 2115,  780, 200,  30, 0, random(), 1000, PIX_WHITE, 10, 12000, 10000, 200, 5010 )
    effects.pixels:add ( random( 1, 5 ), 2235, 1210,  30,  30, 0, random(), 1000, PIX_BLUE,  10, 12000, 10000, 200, 4160 )
    effects.pixels:add ( random( 1, 5 ), 2260, 1210,  30,  30, 0, random(), 1000, PIX_BLUE,  10, 12000, 10000, 200, 4160 )
    effects.pixels:add ( random( 1, 5 ), 1985, 1650,  60,  30, 0, random(), 1000, PIX_BLUE,  10, 12000, 10000, 200, 3270 )
    effects.pixels:add ( random( 1, 5 ), 2285, 1790,  40,  30, 0, random(), 1000, PIX_BLUE,  10, 12000, 10000, 200, 3010 )
    effects.pixels:add ( random( 1, 5 ), 2315, 2080,  30,  30, 0, random(), 1000, PIX_BLUE,  10, 12000, 10000, 200, 2350 )
    effects.pixels:add ( random( 1, 5 ), 2340, 2110,  30,  30, 0, random(), 1000, PIX_BLUE,  10, 12000, 10000, 200, 2290 )
    effects.pixels:add ( random( 1, 5 ), 2385, 2315,  50,  30, 0, random(), 1000, PIX_BLUE,  10, 12000, 10000, 200, 1830 )
    effects.pixels:add ( random( 1, 5 ), 2430, 2795,  50,  30, 0, random(), 1000, PIX_BLUE,  10, 12000, 10000, 200,  850 )
    effects.pixels:add ( random( 1, 5 ), 2480, 2845,  50,  30, 0, random(), 1000, PIX_BLUE,  10, 12000, 10000, 200,  640 )
  end
  if player[1]:get_wall_shield() ~= player[1]:get_max_wall_shield() then
    player[1]:set_wall_shield( player[1]:get_max_wall_shield() )
    __race_pl[1].cur_time  = __race_pl[1].cur_time + 600
    __race_pl[1].full_time = __race_pl[1].full_time + 600
  end
  if player[2]:get_wall_shield() ~= player[2]:get_max_wall_shield() then
    player[2]:set_wall_shield( player[2]:get_max_wall_shield() )
    __race_pl[2].cur_time  = __race_pl[2].cur_time + 600
    __race_pl[2].full_time = __race_pl[2].full_time + 600
  end
end   -- frarace3()
