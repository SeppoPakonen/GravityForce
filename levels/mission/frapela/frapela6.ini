-- INI-Datei
-- Frapela6
-- von Frapela
-- 17.08.2003

if (VERSION >= 0.9) then
  dofile("./levels/compat.lua")
end

mybase = bases:add(  0, PLAYER_BASE, 2351, 2124 )
mybase = bases:add(  1, ENEMY_S_BASE, 1912, 2075 )
mybase = bases:add(  2, ENEMY_S_BASE, 1477, 2028 )
mybase = bases:add(  3, ENEMY_S_BASE, 1286, 1942 )
mybase = bases:add(  4, ENEMY_S_BASE, 1003, 2032 )
mybase = bases:add(  5, ENEMY_S_BASE,  667, 2031 )
mybase = bases:add(  6, ENEMY_S_BASE,  318, 2030 )
mybase = bases:add(  7, ENEMY_S_BASE, 2467, 1742 )
mybase = bases:add(  8, ENEMY_S_BASE, 2429, 1742 )
mybase = bases:add(  9, ENEMY_S_BASE, 2391, 1742 )
mybase = bases:add( 10, ENEMY_S_BASE, 2353, 1742 )
mybase = bases:add( 11, ENEMY_S_BASE, 2581, 1653 )
mybase = bases:add( 12, ENEMY_S_BASE, 1441, 1742 )
mybase = bases:add( 13, ENEMY_S_BASE, 1293, 1742 )
mybase = bases:add( 14, ENEMY_S_BASE, 1255, 1742 )
mybase = bases:add( 15, ENEMY_S_BASE, 1104, 1739 )
mybase = bases:add( 16, ENEMY_S_BASE,  743, 1786 )
mybase = bases:add( 17, ENEMY_S_BASE,  498, 1600 )
mybase = bases:add( 18, ENEMY_S_BASE,  400, 1761 )
mybase = bases:add( 19, ENEMY_S_BASE,  347, 1760 )
mybase = bases:add( 20, ENEMY_S_BASE,   85, 1645 )
mybase = bases:add( 21, ENEMY_S_BASE, 2352, 1355 )
mybase = bases:add( 22, ENEMY_S_BASE, 2512, 1358 )
mybase = bases:add( 23, ENEMY_S_BASE, 2427, 1356 )
mybase = bases:add( 24, ENEMY_S_BASE, 1895, 1450 )
mybase = bases:add( 25, ENEMY_S_BASE, 1552, 1453 )
mybase = bases:add( 26, ENEMY_S_BASE, 1514, 1453 )
mybase = bases:add( 27, ENEMY_S_BASE, 1476, 1453 )
mybase = bases:add( 28, ENEMY_S_BASE, 1438, 1453 )
mybase = bases:add( 29, ENEMY_S_BASE, 1820, 1647 )
mybase = bases:add( 30, ENEMY_S_BASE, 1574, 1645 )
mybase = bases:add( 31, ENEMY_S_BASE, 1700, 1646 )
mybase = bases:add( 32, ENEMY_S_BASE, 1662, 1646 )
mybase = bases:add( 33, ENEMY_S_BASE,  959, 1509 )
mybase = bases:add( 34, ENEMY_S_BASE,  675, 1355 )
mybase = bases:add( 35, ENEMY_S_BASE,  637, 1355 )
mybase = bases:add( 36, ENEMY_S_BASE,  509, 1359 )
mybase = bases:add( 37, ENEMY_S_BASE, 2245, 1222 )
mybase = bases:add( 38, ENEMY_S_BASE,  321, 1211 )
mybase = bases:add( 39, ENEMY_S_BASE, 1168, 1136 )
mybase = bases:add( 40, ENEMY_S_BASE, 2629,  981 )
mybase = bases:add( 41, ENEMY_S_BASE, 2540,  976 )
mybase = bases:add( 42, ENEMY_S_BASE, 2445,  975 )
mybase = bases:add( 43, ENEMY_S_BASE, 1946, 1021 )
mybase = bases:add( 44, ENEMY_S_BASE, 1900, 1024 )
mybase = bases:add( 45, ENEMY_S_BASE, 1576,  981 )
mybase = bases:add( 46, ENEMY_S_BASE, 1241,  933 )
mybase = bases:add( 47, ENEMY_S_BASE,  935,  971 )
mybase = bases:add( 48, ENEMY_S_BASE,  687,  976 )
mybase = bases:add( 49, ENEMY_S_BASE,  632,  976 )
mybase = bases:add( 50, ENEMY_S_BASE, 2293,  693 )
mybase = bases:add( 51, ENEMY_S_BASE, 2009,  741 )
mybase = bases:add( 52, ENEMY_S_BASE, 1915,  735 )
mybase = bases:add( 53, ENEMY_S_BASE, 2085,  631 )
mybase = bases:add( 54, ENEMY_S_BASE, 1298,  733 )
mybase = bases:add( 55, ENEMY_S_BASE, 1365,  734 )
mybase = bases:add( 56, ENEMY_S_BASE,  626,  737 )
mybase = bases:add( 57, ENEMY_S_BASE,  687,  734 )
mybase = bases:add( 58, ENEMY_S_BASE,  446,  785 )
mybase = bases:add( 59, ENEMY_S_BASE,  492,  785 )
mybase = bases:add( 60, ENEMY_S_BASE,  330,  789 )
mybase = bases:add( 61, ENEMY_S_BASE, 2532,  493 )
mybase = bases:add( 62, ENEMY_S_BASE, 2663,  444 )
mybase = bases:add( 63, ENEMY_S_BASE, 1395,  539 )
mybase = bases:add( 64, ENEMY_S_BASE, 1512,  540 )
mybase = bases:add( 65, ENEMY_S_BASE,  770,  443 )
mybase = bases:add( 66, ENEMY_S_BASE,  732,  443 )
mybase = bases:add( 67, ENEMY_S_BASE,  695,  443 )
mybase = bases:add( 68, ENEMY_S_BASE,  321,  541 )
mybase = bases:add( 69, ENEMY_S_BASE, 2535,  107 )
mybase = bases:add( 70, ENEMY_S_BASE, 2108,  157 )
mybase = bases:add( 71, ENEMY_S_BASE, 1853,  158 )
mybase = bases:add( 72, ENEMY_S_BASE, 1815,  158 )
mybase = bases:add( 73, ENEMY_S_BASE, 2006,  309 )
mybase = bases:add( 74, ENEMY_S_BASE, 1335,  251 )
mybase = bases:add( 75, ENEMY_S_BASE, 1178,  148 )
mybase = bases:add( 76, ENEMY_S_BASE, 1098,  308 )
mybase = bases:add( 77, ENEMY_S_BASE,  789,  207 )
mybase = bases:add( 78, ENEMY_S_BASE,  547,  105 )
mybase = bases:add( 79, ENEMY_S_BASE,  459,  203 )
mybase = bases:add( 80, ENEMY_S_BASE,  384,  203 )
myob = objects:add_special( 0, SPOBJ_TELEPORT1,  382, 1690, 6 )
myob = objects:add_special( 1, SPOBJ_TELEPORT1, 1834, 1572, 4 )
myob = objects:add_special( 2, SPOBJ_TELEPORT1, 1643, 1569, 5 )
myob = objects:add_special( 3, SPOBJ_TELEPORT1, 1174, 1060, 7 )
myob = objects:add_special( 4, SPOBJ_TELEPORT1,  198,   59, 1 )
myob = objects:add_special( 5, SPOBJ_TELEPORT1, 2668,   63, 2 )
myob = objects:add_special( 6, SPOBJ_TELEPORT1, 2424, 1889, 0 )
myob = objects:add_special( 7, SPOBJ_TELEPORT1,  161, 1991, 3 )

local paar_01_bild = images:load("./frapela/paar_01.bmp")
local paar_02_bild = images:load("./frapela/paar_02.bmp")
local paar_03_bild = images:load("./frapela/paar_03.bmp")
local paar_04_bild = images:load("./frapela/paar_04.bmp")
local paar_05_bild = images:load("./frapela/paar_05.bmp")
local paar_06_bild = images:load("./frapela/paar_06.bmp")
local paar_07_bild = images:load("./frapela/paar_07.bmp")
local paar_08_bild = images:load("./frapela/paar_08.bmp")
local paar_09_bild = images:load("./frapela/paar_09.bmp")
local paar_10_bild = images:load("./frapela/paar_10.bmp")
local paar_11_bild = images:load("./frapela/paar_11.bmp")
local paar_12_bild = images:load("./frapela/paar_12.bmp")
local paar_13_bild = images:load("./frapela/paar_13.bmp")
local paar_14_bild = images:load("./frapela/paar_14.bmp")
local paar_15_bild = images:load("./frapela/paar_15.bmp")
local paar_16_bild = images:load("./frapela/paar_16.bmp")
local paar_17_bild = images:load("./frapela/paar_17.bmp")
local paar_18_bild = images:load("./frapela/paar_18.bmp")
local paar_19_bild = images:load("./frapela/paar_19.bmp")
local paar_20_bild = images:load("./frapela/paar_20.bmp")
local paar_21_bild = images:load("./frapela/paar_21.bmp")
local paar_22_bild = images:load("./frapela/paar_22.bmp")
local paar_23_bild = images:load("./frapela/paar_23.bmp")
local paar_24_bild = images:load("./frapela/paar_24.bmp")
local paar_25_bild = images:load("./frapela/paar_25.bmp")
local paar_26_bild = images:load("./frapela/paar_26.bmp")
local paar_27_bild = images:load("./frapela/paar_27.bmp")
local paar_28_bild = images:load("./frapela/paar_28.bmp")
local paar_29_bild = images:load("./frapela/paar_29.bmp")
local paar_30_bild = images:load("./frapela/paar_30.bmp")
local paar_31_bild = images:load("./frapela/paar_31.bmp")
local paar_32_bild = images:load("./frapela/paar_32.bmp")
local paar_33_bild = images:load("./frapela/paar_33.bmp")
local paar_34_bild = images:load("./frapela/paar_34.bmp")
local paar_35_bild = images:load("./frapela/paar_35.bmp")
local paar_36_bild = images:load("./frapela/paar_36.bmp")
local paar_37_bild = images:load("./frapela/paar_37.bmp")
local paar_38_bild = images:load("./frapela/paar_38.bmp")
local paar_39_bild = images:load("./frapela/paar_39.bmp")
local paar_40_bild = images:load("./frapela/paar_40.bmp")

paar     = {}
paar[ 1] = objects:add( 51, paar_01_bild, 4000,   0 )
paar[ 2] = objects:add( 52, paar_02_bild, 4000,  15 )
paar[ 3] = objects:add( 53, paar_03_bild, 4000,  30 )
paar[ 4] = objects:add( 54, paar_04_bild, 4000,  45 )
paar[ 5] = objects:add( 55, paar_05_bild, 4000,  60 )
paar[ 6] = objects:add( 56, paar_06_bild, 4000,  75 )
paar[ 7] = objects:add( 57, paar_07_bild, 4000,  90 )
paar[ 8] = objects:add( 58, paar_08_bild, 4000, 105 )
paar[ 9] = objects:add( 59, paar_09_bild, 4000, 120 )
paar[10] = objects:add( 60, paar_10_bild, 4000, 135 )
paar[11] = objects:add( 61, paar_11_bild, 4000, 150 )
paar[12] = objects:add( 62, paar_12_bild, 4000, 165 )
paar[13] = objects:add( 63, paar_13_bild, 4000, 180 )
paar[14] = objects:add( 64, paar_14_bild, 4000, 195 )
paar[15] = objects:add( 65, paar_15_bild, 4000, 210 )
paar[16] = objects:add( 66, paar_16_bild, 4000, 225 )
paar[17] = objects:add( 67, paar_17_bild, 4000, 240 )
paar[18] = objects:add( 68, paar_18_bild, 4000, 255 )
paar[19] = objects:add( 69, paar_19_bild, 4000, 270 )
paar[20] = objects:add( 70, paar_20_bild, 4000, 285 )
paar[21] = objects:add( 71, paar_21_bild, 4000, 300 )
paar[22] = objects:add( 72, paar_22_bild, 4000, 315 )
paar[23] = objects:add( 73, paar_23_bild, 4000, 330 )
paar[24] = objects:add( 74, paar_24_bild, 4000, 345 )
paar[25] = objects:add( 75, paar_25_bild, 4000, 360 )
paar[26] = objects:add( 76, paar_26_bild, 4000, 375 )
paar[27] = objects:add( 77, paar_27_bild, 4000, 390 )
paar[28] = objects:add( 78, paar_28_bild, 4000, 405 )
paar[29] = objects:add( 79, paar_29_bild, 4000, 420 )
paar[30] = objects:add( 80, paar_30_bild, 4000, 445 )
paar[31] = objects:add( 81, paar_31_bild, 4000, 460 )
paar[32] = objects:add( 82, paar_32_bild, 4000, 475 )
paar[33] = objects:add( 83, paar_33_bild, 4000, 490 )
paar[34] = objects:add( 84, paar_34_bild, 4000, 505 )
paar[35] = objects:add( 85, paar_35_bild, 4000, 520 )
paar[36] = objects:add( 86, paar_36_bild, 4000, 535 )
paar[37] = objects:add( 87, paar_37_bild, 4000, 550 )
paar[38] = objects:add( 88, paar_38_bild, 4000, 565 )
paar[39] = objects:add( 89, paar_39_bild, 4000, 580 )
paar[40] = objects:add( 90, paar_40_bild, 4000, 595 )

player[1].controls:disable()
paar_nr = 40
paar_x = 2378
paar_y = 2090
paar[paar_nr]:set_x( paar_x )
paar[paar_nr]:set_y( paar_y )
gegner_zufi = 1

function hook_keyboard_hit_0(key)
  if player[1].controls:get_disabled() == 1 then
    if     key == 82 then   -- linke  Pfeil-Taste
      paar[paar_nr]:set_x( 4000 )
      paar[paar_nr]:set_y( 0+((paar_nr-1)*15) )
      paar_nr = paar_nr - 1
      if paar_nr == 1 then
        paar_nr = 40
      end
      paar[paar_nr]:set_x( paar_x )
      paar[paar_nr]:set_y( paar_y )
    elseif key == 83 then   -- rechte Pfeil-Taste
      paar[paar_nr]:set_x( 4000 )
      paar[paar_nr]:set_y( 0+((paar_nr-1)*15) )
      paar_nr = paar_nr + 1
      if paar_nr == 41 then
        paar_nr = 2
      end
      paar[paar_nr]:set_x( paar_x )
      paar[paar_nr]:set_y( paar_y )
    elseif key == 67 then   -- Return
      level_start()
    end
  end
end   -- hook_keyboard_hit_0(key)

function hook_player_returns_cargo_0(pl)
  pl:set_dont_continue(0)
  if     pl:get_weight() == 20 then
    ladung = 0
    anzahl_paare = anzahl_paare - 1
    if     anzahl_paare == 0 then
      player[1]:inc_bonus(1250)
      local myosd = playmap[1].osd:get_osdbit(1000)
      myosd:clear()
      pl:set_mission_status(1)
    elseif anzahl_paare == 1 then
      player[1]:inc_bonus(250)
      local frapelaosd = playmap[1].osd:get_osdbit(1000)
      if (LANGUAGE == LANG_DE) then
        paket_text = "[f:impact14][c:white]Noch [c:orange]"..anzahl_paare.."[c:white] Paar! "
      else
        paket_text = "[f:impact14][c:white]Still [c:orange]"..anzahl_paare.."[c:white] pair! "
      end
      frapelaosd:draw_typewriter_text( paket_text, 5, 4, 0 )
    else
      player[1]:inc_bonus(250)
      local frapelaosd = playmap[1].osd:get_osdbit(1000)
      if (LANGUAGE == LANG_DE) then
        paket_text = "[f:impact14][c:white]Noch [c:orange]"..anzahl_paare.."[c:white] Paare! "
      else
        paket_text = "[f:impact14][c:white]Still [c:orange]"..anzahl_paare.."[c:white] pairs! "
      end
      frapelaosd:draw_typewriter_text( paket_text, 5, 4, 0 )
    end
  elseif pl:get_weight() == 10 then
    local frapelaosd = playmap[1].osd:get_osdbit(1000)
    if (LANGUAGE == LANG_DE) then
      paket_text = "[f:impact14][c:white]Zweites Paket [c:orange]"..ladung.."[c:white] suchen! "
    else
      paket_text = "[f:impact14][c:white]Search second parcel [c:orange]"..ladung
    end
    frapelaosd:draw_typewriter_text( paket_text, 5, 4, 0 )
    pl:set_dont_continue(1)
  end
end   -- hook_player_returns_cargo_0(pl)

function hook_player_dead_0(pl)
  if pl:get_weight() > 0 then
    pl:set_mission_status(-1)
  end
end   -- hook_player_dead_0(pl)

function hook_player_takes_cargo_0(pl, ba)
  pl:set_dont_continue(0)
  if     pl:get_weight() == 10 then
    player[1]:inc_bonus(50)
    ladung = fracht_paket[pl:get_land_base()]
    local frapelaosd = playmap[1].osd:get_osdbit(1000)
    if (LANGUAGE == LANG_DE) then
      paket_text = "[f:impact14][c:white]Erstes Paket [c:orange]"..ladung.."[c:white] eingeladen! "
    else
      paket_text = "[f:impact14][c:white]First parcel [c:orange]"..ladung.."[c:white] loaded! "
    end
    frapelaosd:draw_typewriter_text( paket_text, 5, 4, 0 )
  elseif pl:get_weight() == 20 then
    if ladung == fracht_paket[pl:get_land_base()] then
      player[1]:inc_bonus(100)
      ladung = "voll"
      local frapelaosd = playmap[1].osd:get_osdbit(1000)
      if (LANGUAGE == LANG_DE) then
        paket_text = "[f:impact14][c:white]Zurueck zur Heimatbasis! "
      else
        paket_text = "[f:impact14][c:white]Back to Homebase! "
      end
      frapelaosd:draw_typewriter_text( paket_text, 5, 4, 0 )
    else
      local frapelaosd = playmap[1].osd:get_osdbit(1000)
      if (LANGUAGE == LANG_DE) then
        paket_text = "[f:impact14][c:white]Zweites Paket [c:orange]"..ladung.."[c:white] suchen! "
      else
        paket_text = "[f:impact14][c:white]Search second parcel [c:orange]"..ladung
      end
      frapelaosd:draw_typewriter_text( paket_text, 5, 4, 0 )
      pl:set_weight(pl:get_weight()-10)
      pl:set_dont_continue(1)
    end
  end
end   -- hook_player_takes_cargo_0(pl, ba)

function hook_player_land_0(pl, ba)
  if ( ladung == "voll" ) and (pl:get_land_base() > 0 ) then
    local frapelaosd = playmap[1].osd:get_osdbit(1000)
    if (LANGUAGE == LANG_DE) then
      paket_text = "[f:impact14][c:white]Zuladung nicht moeglich! "
    else
      paket_text = "[f:impact14][c:white]Loading impossible! "
    end
    frapelaosd:draw_typewriter_text( paket_text, 5, 4, 0 )
  end
end   -- hook_player_land_0(pl, ba)

function level_start()
  fracht_paket       = {}
  local n
  for n = 1, 80 do
    fracht_paket[n] = 0
  end
  paar[paar_nr]:set_x( 4000 )
  paar[paar_nr]:set_y( 0+((paar_nr-1)*15) )
  ladung = 0
  anzahl_paare = paar_nr
  local n, zufi_basis_1, zufi_basis_2
  for n = 1, anzahl_paare do
    zufi_basis_1 = random( 1, 80)
    zufi_basis_2 = random( 1, 80)
    if ( fracht_paket[zufi_basis_1] > 0 ) or ( fracht_paket[zufi_basis_2] > 0 ) or ( zufi_basis_1 == zufi_basis_2 ) then
      n = n - 1
    else
      fracht_paket[zufi_basis_1] = n
      fracht_paket[zufi_basis_2] = n
      fracht = bases:get_base( zufi_basis_1 )
      fracht:set_cargo_type(CARGO_OBJECT)
      fracht:set_cargo_object(paar[n])
      fracht:set_cargo_weight(10)
      fracht = bases:get_base( zufi_basis_2 )
      fracht:set_cargo_type(CARGO_OBJECT)
      fracht:set_cargo_object(paar[n])
      fracht:set_cargo_weight(10)
    end
  end

  local n
  for n = 2, 40 do
    if anzahl_paare == n then
      break
    end
    gegner_zufi = gegner_zufi - 0.025641
  end
  if random() <= gegner_zufi then
    myen = enemies:add(  5, E_TOWER_SINGLE, 1806, 1727, 0, D_RIGHT, 45,  800, 2, 1 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 69, E_TOWER_SINGLE, 1577, 1818, 0, D_DOWN,  45,  800, 2, 1 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 70, E_TOWER_SINGLE, 1588, 1971, 0, D_UP,    45,  800, 2, 1 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 71, E_TOWER_SINGLE, 1566, 1968, 0, D_UP,    45,  800, 2, 1 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 72, E_TOWER_SINGLE,  235, 1578, 0, D_DOWN,  45, 1200, 2, 1 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 73, E_TOWER_SINGLE,  309, 1862, 0, D_DOWN,  45,  800, 2, 1 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 74, E_TOWER_SINGLE,  465, 1867, 0, D_DOWN,  45,  800, 2, 1 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 75, E_TOWER_THREE,   395, 2024, 0,          60,  800, 2, 2, 0 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 76, E_TOWER_SINGLE,  240, 2021, 0, D_UP,    45,  800, 2, 1 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 77, E_TOWER_SINGLE,  566, 2022, 0, D_UP,    45,  800, 2, 1 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 78, E_TOWER_SINGLE,  914,  291, 0, D_UP,    45,  800, 2, 1 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 79, E_TOWER_SINGLE,  993,  291, 0, D_UP,    45,  800, 2, 1 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 80, E_TOWER_SINGLE,  607,  959, 0, D_RIGHT, 45,  800, 2, 1 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 81, E_TOWER_SINGLE, 1015,  956, 0, D_LEFT,  45,  800, 2, 1 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 82, E_TOWER_SINGLE, 1005,  965, 0, D_UP,    45,  800, 2, 1 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 83, E_TOWER_SINGLE,  887,  738, 0, D_LEFT,  45,  800, 2, 1 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add(  1, E_TOWER_SINGLE, 1021,  531, 0, D_LEFT,  45,  800, 2, 1 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add(  2, E_TOWER_THREE,   755,  579, 0,          60,  800, 2, 2, 0 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add(  3, E_TOWER_THREE,  1180,  680, 0,          60,  800, 2, 2, 0 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add(  4, E_TOWER_SINGLE, 2158,  917, 0, D_UP,    45,  800, 2, 1 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add(  6, E_SHIP_BLUE1, 1907, 1870, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1907, 2071 ), random( 1870, 2030 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add(  7, E_SHIP_BLUE1, 1851, 1974, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1660, 2071 ), random( 1970, 2030 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add(  8, E_SHIP_BLUE1, 1395, 1870, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1395, 1497 ), random( 1870, 1990 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add(  9, E_SHIP_BLUE1, 1019, 1965, 0, 80, 800, 2, 2, 0 )
    myen.wp:add( 1022, 1965, random() + 0.7, 0 )
    myen.wp:add( 1162, 1995, random() + 0.7, 0 )
    myen.wp:add( 1106, 1810, random() + 0.7, 0 )
    myen.wp:add( 1282, 1810, random() + 0.7, 0 )
    myen.wp:add( 1042, 1995, random() + 0.7, 0 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 10, E_SHIP_BLUE2,  584, 1589, 0, 80, 800, 2, 2, 0 )
    myen.wp:add(  584, 1589, 1.0, 0 )
    myen.wp:add(  825, 1589, 1.0, 0 )
    myen.wp:add(  565, 1707, 1.0, 0 )
    myen.wp:add(  597, 1918, 1.0, 0 )
    myen.wp:add(  835, 1918, 1.0, 0 )
    myen.wp:add(  917, 1753, 1.0, 0 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 11, E_SHIP_BLUE2,  597, 1918, 0, 80, 800, 2, 2, 0 )
    myen.wp:add(  597, 1918, 1.0, 0 )
    myen.wp:add(  835, 1918, 1.0, 0 )
    myen.wp:add(  917, 1753, 1.0, 0 )
    myen.wp:add(  584, 1589, 1.0, 0 )
    myen.wp:add(  825, 1589, 1.0, 0 )
    myen.wp:add(  565, 1707, 1.0, 0 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 12, E_SHIP_BLUE2,  145, 1580, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add(  145, 1580, random() + 0.7, 0 )
      myen.wp:add(  145, 1943, random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 13, E_SHIP_BLUE2,  103, 1495, 0, 80, 800, 2, 2, 0 )
    myen.wp:add(  103, 1495, random() + 0.7, 0 )
    myen.wp:add(  103, 1005, 5, 0 )
    myen.wp:add(  301, 1017, random() + 0.7, 0 )
    myen.wp:add(  103, 1062, random() + 0.7, 0 )
    myen.wp:add(  297, 1098, random() + 0.7, 0 )
    myen.wp:add(  103, 1138, random() + 0.7, 0 )
    myen.wp:add(  200, 1166, random() + 0.7, 0 )
    myen.wp:add(  103, 1200, random() + 0.7, 0 )
    myen.wp:add(  202, 1231, random() + 0.7, 0 )
    myen.wp:add(  103, 1267, random() + 0.7, 0 )
    myen.wp:add(  204, 1305, random() + 0.7, 0 )
    myen.wp:add(  103, 1345, random() + 0.7, 0 )
    myen.wp:add(  200, 1388, random() + 0.7, 0 )
    myen.wp:add(  103, 1431, random() + 0.7, 0 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 14, E_SHIP_BLUE2,  135,  762, 0, 80, 800, 2, 2, 0 )
    myen.wp:add(  135,  762, random() + 0.7, 0 )
    myen.wp:add(  162,  784, random() + 0.7, 0 )
    myen.wp:add(  135,  807, random() + 0.7, 0 )
    myen.wp:add(  163,  833, random() + 0.7, 0 )
    myen.wp:add(  128,  867, random() + 0.7, 0 )
    myen.wp:add(  156,  895, random() + 0.7, 0 )
    myen.wp:add(  126,  925, random() + 0.7, 0 )
    myen.wp:add(  158,  956, random() + 0.7, 0 )
    myen.wp:add(  127,  956, random() + 0.7, 0 )
    myen.wp:add(  159,  921, random() + 0.7, 0 )
    myen.wp:add(  131,  896, random() + 0.7, 0 )
    myen.wp:add(  159,  872, random() + 0.7, 0 )
    myen.wp:add(  131,  849, random() + 0.7, 0 )
    myen.wp:add(  163,  819, random() + 0.7, 0 )
    myen.wp:add(  136,  793, random() + 0.7, 0 )
    myen.wp:add(  162,  762, random() + 0.7, 0 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 15, E_SHIP_BLUE1,  245,  490, 0, 80, 800, 2, 2, 0 )
    myen.wp:add(  245,  490, random() + 0.7, 0 )
    myen.wp:add(  245,  625, random() + 0.7, 0 )
    myen.wp:add(  390,  625, random() + 0.7, 0 )
    myen.wp:add(  390,  490, random() + 0.7, 0 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 16, E_SHIP_BLUE1,  200,  465, 0, 80, 800, 2, 2, 0 )
    myen.wp:add(  480,  465, random() + 0.7, 0 )
    myen.wp:add(  480,  710, random() + 0.7, 0 )
    myen.wp:add(  200,  710, random() + 0.7, 0 )
    myen.wp:add(  200,  465, random() + 0.7, 0 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 17, E_SHIP_BLUE1,  155,  440, 0, 80, 800, 2, 2, 0 )
    myen.wp:add(  155,  440, random() + 0.7, 0 )
    myen.wp:add(  155,  652, random() + 0.7, 0 )
    myen.wp:add(  155,  440, random() + 0.7, 0 )
    myen.wp:add(  482,  440, random() + 0.7, 0 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 18, E_SHIP_BLUE1,  110,  415, 0, 80, 800, 2, 2, 0 )
    myen.wp:add(  110,  415, random() + 0.7, 0 )
    myen.wp:add(  488,  415, random() + 0.7, 0 )
    myen.wp:add(  110,  415, random() + 0.7, 0 )
    myen.wp:add(  110,  556, random() + 0.7, 0 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 19, E_SHIP_BLUE2,  247,  341, 0, 80, 800, 2, 2, 0 )
    myen.wp:add(  247,  341, random() + 0.7, 0 )
    myen.wp:add(  101,  246, random() + 0.7, 0 )
    myen.wp:add(  257,  197, random() + 0.7, 0 )
    myen.wp:add(  181,   88, random() + 0.7, 0 )
    myen.wp:add(  449,   88, random() + 0.7, 0 )
    myen.wp:add(  247,  160, random() + 0.7, 0 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 20, E_SHIP_BLUE1,  870,  150, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random(  605,  870 ), random(   47,  160 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 21, E_SHIP_BLUE1,  998,   48, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random(  998, 1111 ), random(   48,  260 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 22, E_SHIP_BLUE1, 1250,   50, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1250, 1400 ), random(   50,  205 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 23, E_SHIP_BLUE1, 1437,  267, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1437, 1640 ), random(  190,  267 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 24, E_SHIP_BLUE1, 1565,  115, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1565, 2215 ), random(   50,  115 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 25, E_SHIP_BLUE1, 1925,  145, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1925, 2020 ), random(  145,  265 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 26, E_SHIP_BLUE1, 2265,   50, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 2265, 2490 ), random(   50,   75 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 27, E_SHIP_BLUE1, 2205,  240, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 2205, 2495 ), random(  240,  270 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 28, E_SHIP_BLUE1, 2545,  240, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 2545, 2648 ), random(  240,  400 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 29, E_SHIP_BLUE1, 2390,  820, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 2390, 2650 ), random(  820,  930 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 30, E_SHIP_BLUE2,  470, 1442, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random(  468,  551 ), random( 1442, 1530 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 31, E_SHIP_BLUE2,  770, 1345, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random(  770,  935 ), random( 1345, 1440 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 32, E_SHIP_BLUE2,  465, 1200, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random(  465,  830 ), random( 1200, 1285 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 33, E_SHIP_BLUE2,  768,  961, 0, 80, 800, 2, 2, 0 )
    myen.wp:add(  768,  961, random() + 0.7, 0 )
    myen.wp:add(  768, 1024, random() + 0.7, 0 )
    myen.wp:add(  922, 1155, random() + 0.7, 0 )
    myen.wp:add(  928, 1107, random() + 0.7, 0 )
    myen.wp:add(  790, 1048, random() + 0.7, 0 )
    myen.wp:add(  768, 1025, random() + 0.7, 0 )
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 34, E_SHIP_BLUE2,  752,  826, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random(  752,  835 ), random(  826,  920 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 35, E_SHIP_BLUE2,  812,  510, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random(  812,  880 ), random(  510,  633 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 36, E_SHIP_BLUE1,  610,  510, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random(  610,  680 ), random(  510,  590 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 37, E_SHIP_BLUE1,  660,  335, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random(  660,  790 ), random(  335,  400 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 38, E_SHIP_BLUE1, 1390,  385, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1390, 1500 ), random(  385,  497 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 39, E_SHIP_BLUE1, 1295,  625, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1295, 1360 ), random(  625,  690 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 40, E_SHIP_BLUE2, 1815,  430, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1815, 1985 ), random(  430,  670 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 41, E_SHIP_BLUE1, 2070,  430, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 2070, 2110 ), random(  430,  585 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 42, E_SHIP_BLUE2, 2160,  435, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 2160, 2272 ), random(  435,  625 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 43, E_SHIP_BLUE1, 1860,  860, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1860, 1930 ), random(  860,  975 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 44, E_SHIP_BLUE1, 1340,  820, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1340, 1598 ), random(  820,  935 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 45, E_SHIP_BIGRED, 1015,  818,0,   0,   0,   0,   0,   0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1015, 1275 ), random(  818,  873 ), random() + 0.7, 0 )
    end
  end
  -- 4 mal Anfang
  if random() <= gegner_zufi then
    myen = enemies:add( 46, E_SHIP_BLUE1, 1340, 1105, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1340, 1590 ), random( 1105, 1410 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 47, E_SHIP_BLUE1, 1415, 1193, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1340, 1590 ), random( 1105, 1410 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 48, E_SHIP_BLUE1, 1481, 1275, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1340, 1590 ), random( 1105, 1410 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 49, E_SHIP_BLUE1, 1549, 1357, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1340, 1590 ), random( 1105, 1410 ), random() + 0.7, 0 )
    end
  end
  -- 4 mal Ende
  -- 4 mal Anfang
  if random() <= gegner_zufi then
    myen = enemies:add( 50, E_SHIP_BLUE1, 1100, 1245, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1100, 1350 ), random( 1245, 1695 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 51, E_SHIP_BLUE1, 1170, 1420, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1100, 1350 ), random( 1245, 1695 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 52, E_SHIP_BLUE1, 1237, 1528, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1100, 1350 ), random( 1245, 1695 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 53, E_SHIP_BLUE1, 1307, 1637, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1100, 1350 ), random( 1245, 1695 ), random() + 0.7, 0 )
    end
  end
  -- 4 mal Ende
  -- 4 mal Anfang
  if random() <= gegner_zufi then
    myen = enemies:add( 54, E_SHIP_BLUE1, 1590, 1410, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1100, 1590 ), random( 1245, 1410 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 55, E_SHIP_BLUE1, 1468, 1379, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1100, 1590 ), random( 1245, 1410 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 56, E_SHIP_BLUE1, 1379, 1350, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1100, 1590 ), random( 1245, 1410 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 57, E_SHIP_BLUE1, 1246, 1308, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1100, 1590 ), random( 1245, 1410 ), random() + 0.7, 0 )
    end
  end
  -- 4 mal Ende
  -- 4 mal Anfang
  if random() <= gegner_zufi then
    myen = enemies:add( 58, E_SHIP_BLUE1, 1100, 1535, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1100, 1450 ), random( 1535, 1695 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 59, E_SHIP_BLUE1, 1176, 1597, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1100, 1450 ), random( 1535, 1695 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 60, E_SHIP_BLUE1, 1217, 1643, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1100, 1450 ), random( 1535, 1695 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 61, E_SHIP_BLUE1, 1275, 1678, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1100, 1450 ), random( 1535, 1695 ), random() + 0.7, 0 )
    end
  end
  -- 4 mal Ende
  if random() <= gegner_zufi then
    myen = enemies:add( 62, E_SHIP_BLUE2, 2016, 1250, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 2016, 2080 ), random( 1250, 1685 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 63, E_SHIP_BLUE2, 1824, 1250, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 1824, 2080 ), random( 1250, 1380 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 64, E_SHIP_BLUE1, 2100, 1102, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 2100, 2405 ), random( 1102, 1178 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 65, E_SHIP_BLUE1, 2352, 1102, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 2352, 2407 ), random( 1102, 1310 ), random() + 0.7, 0 )
    end
  end
  -- 3 mal Anfang
  if random() <= gegner_zufi then
    myen = enemies:add( 66, E_SHIP_BLUE1, 2340, 1440, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 2340, 2458 ), random( 1440, 1700 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 67, E_SHIP_BLUE1, 2384, 1548, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 2340, 2458 ), random( 1440, 1700 ), random() + 0.7, 0 )
    end
  end
  if random() <= gegner_zufi then
    myen = enemies:add( 68, E_SHIP_BLUE1, 2430, 1626, 0, 80, 800, 2, 2, 0 )
    local n
    for n = 1, 10 do
      myen.wp:add( random( 2340, 2458 ), random( 1440, 1700 ), random() + 0.7, 0 )
    end
  end
  -- 3 mal Ende
  player[1].controls:enable()
end   -- level_start()
